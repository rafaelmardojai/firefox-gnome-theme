:root {
    --delay: 0s;
    --transition-time: 0.2s;
    --positionX1: 48px;
    --positionX2: absolute;
}

:root[inFullscreen] {
    #sidebar {
        height: 100vh;
    }

    #tabbrowser-tabbox {
        margin-left: 0;
    }
}

#tabbrowser-tabs {
    display: none !important;
}

#browser {
    position: relative;
}

#tabbrowser-tabbox {
    z-index: 0 !important;
}

#navigator-toolbox {
    z-index: 10 !important;
}

#sidebar-box {
    border-right: 0.01px solid var(--chrome-content-separator-color) !important;

    &:not([lwt-sidebar]){
        appearance: unset !important;
    }
}

#sidebar-box[sidebarcommand="tabcenter-reborn_ariasuni-sidebar-action"] {
    z-index: 1 !important;

    &:not([hidden]) {
        display: block;
        position: var(--positionX2);
        box-sizing: content-box;
        min-width: 48px;
        max-width: 48px;
        overflow: hidden;

        border-right: 1px solid var(--sidebar-border-color);
        z-index: 1 !important;
        top: 0;
        bottom: 0;
    }

    &:hover #sidebar,
    &:hover {
        min-width: 10vw !important;
        width: 30vw !important;
        max-width: 200px !important;
        z-index: 1 !important;
        animation-timing-function: linear;
        transition: all var(--transition-time) ease var(--delay);

        @media (width >= 1200px) {
            max-width: 250px !important;
        }

        @media (width >= 2000px) {
            max-width: 400px !important;
        }
    }

    &:not(:hover) #sidebar,
    &:not(:hover) {
        animation-timing-function: linear;
        transition: all var(--transition-time) ease 0s;
    }

    &,
    #sidebar {
        min-width: 48px !important;
        max-width: 48px !important;
    }

    :root[inFullscreen] &:not([hidden]) {
        min-width: 1px;
        max-width: 1px;
    }

    :root[inFullscreen] &,
    :root[inFullscreen] & + splitter {
        visibility: collapse;
        animation: var(--transition-time) fadeOut;
        animation-fill-mode: forwards;
    }

    :root:not([inFullscreen]) &:not([hidden]) ~ #tabbrowser-tabbox {
        margin-left: var(--positionX1) !important;
    }

    & ~ #sidebar-splitter {
        display: none;
        border-right-color: #0C0C0D !important;
        border-left-color: #0C0C0D !important;
    }

    #sidebar {
        max-height: 100%;
        height: 100%;
    }

    #sidebar-header {
        visibility: collapse;
        display: none;
        background: #0C0C0D;
        border-bottom: none !important;
    }

    #sidebar-switcher-target,
    #sidebar-close {
        filter: invert(100%);
    }

    @media (-moz-bool-pref: "gnomeTheme.extensions.tabCenterReborn.animationDisabled") {
        &:hover #sidebar,
        &:hover {
            transition: none !important;
        }

        &:not(:hover) #sidebar,
        &:not(:hover) {
            animation-timing-function: linear;
            transition: none !important;
        }
    }

    @media (-moz-bool-pref: "gnomeTheme.extensions.tabCenterReborn.alwaysOpen") {
        &,
        #sidebar {
            min-width: 10vw !important;
            width: 30vw !important;
            max-width: 250px !important;
            z-index: 1 !important;
            transition: all var(--transition-time) ease var(--delay);
        }

        &:not([hidden]) {
            position: relative;
            margin-right: -50px;
        }

        &:hover #sidebar,
        &:hover {
            @media (width >= 1200px) {
                max-width: 250px !important;
            }

            @media (width >= 2000px) {
                max-width: 400px !important;
            }
        }
    }
}

@media (max-width: 630px) {
    #urlbar-container {
        width: auto !important;
    }
}

@keyframes fadeOut {
    0% {
        visibility: visible;
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}
